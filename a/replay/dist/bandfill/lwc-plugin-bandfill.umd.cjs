(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.Bandfill={}))})(this,function(i){"use strict";var d=Object.defineProperty;var _=(i,e,s)=>e in i?d(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var a=(i,e,s)=>(_(i,typeof e!="symbol"?e+"":e,s),s);class e{constructor(t){a(this,"_options");a(this,"_points",[]);a(this,"_chart",null);a(this,"_renderer",{draw:t=>{this._points.length<2||!this._chart||t.useBitmapCoordinateSpace(c=>{const o=c.context,h=this._chart.timeScale();o.save(),o.beginPath();for(let r=0;r<this._points.length;r++){const u=this._points[r],l=h.timeToCoordinate(u.time),p=this._options.upperSeries.priceToCoordinate(u.upper);l==null||p==null||(r===0?o.moveTo(l,p):o.lineTo(l,p))}for(let r=this._points.length-1;r>=0;r--){const u=this._points[r],l=h.timeToCoordinate(u.time),p=this._options.lowerSeries.priceToCoordinate(u.lower);l==null||p==null||o.lineTo(l,p)}o.closePath();const n=o.createLinearGradient(0,0,0,o.canvas.height);n.addColorStop(0,this._options.topColor),n.addColorStop(1,this._options.bottomColor),o.fillStyle=n,o.fill(),o.restore()})}});a(this,"_paneView",{renderer:()=>this._renderer});this._options={upperSeries:t.upperSeries,lowerSeries:t.lowerSeries,topColor:t.topColor??"rgba(0,150,255,0.30)",bottomColor:t.bottomColor??"rgba(0,150,255,0.00)"},this._recompute()}attached(t){this._chart=t.chart,this._recompute()}updateAllViews(){this._recompute()}paneViews(){return[this._paneView]}_recompute(){const t=this._options.upperSeries.data(),c=this._options.lowerSeries.data(),o=Math.min(t.length,c.length),h=[];for(let n=0;n<o;n++)t[n].time===c[n].time&&h.push({time:t[n].time,upper:t[n].value,lower:c[n].value});this._points=h}}i.BandFill=e,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
